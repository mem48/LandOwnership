<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="Description" content="Land ownership in England and Wales">

<!-- Set Up Mapbox -->
<script src='https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.js'></script>
<link href='https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.css' rel='stylesheet' />


</head>
<body>

<!-- map -->
<div id="map" class="map" style='width: 100%; height: 600px;'>
<script type="text/javascript">
    // Setup Map
var map = new maplibregl.Map({
		container: 'map',
		style: 'web/style_light.json',
		center: [0, 52], 
		zoom: 6,
		maxZoom: 16,
    minZoom: 4
		});


// Add controls to the map.
map.addControl(new maplibregl.NavigationControl());
map.addControl(new maplibregl.AttributionControl({
customAttribution: 'Contains OS data Â© Crown copyright 2022'
}));
map.addControl(new maplibregl.GeolocateControl({
positionOptions: {
enableHighAccuracy: true
},
trackUserLocation: true
})
,'top-right');
map.addControl(new maplibregl.ScaleControl({
  maxWidth: 80,
  unit: 'metric'
}),'bottom-right');
    
map.on('load', function() {
map.addSource('inspire', {
	'type': 'vector',
	'tiles': [
	'https://storage.googleapis.com/vector_tiles/inspire_full/{z}/{x}/{y}.pbf'
	],
	'minzoom': 6,
	'maxzoom': 16
});

map.addSource('landowners', {
	'type': 'vector',
	'tiles': [
	'https://www.wisemover.co.uk/tiles/landowners/{z}/{x}/{y}.pbf'
	],
	'minzoom': 6,
	'maxzoom': 16
});

map.addLayer({
    'id': 'inspire',
    'type': 'fill',
    'source': 'inspire',
    'source-layer': 'inspire',
    'paint': {
      'fill-color': 'rgba(188,128,189, 0.3)'
    }
});

map.addLayer({
            'id': 'landowners',
            'type': 'circle',
            'source': 'landowners',
            'source-layer': 'landowners',
            'paint': {
              // make circles larger as the user zooms from z12 to z22
              'circle-radius': {
                'base': 2.5,
                'stops': [
                  [8, 3],
                  [22, 180]
                ]
              },
              // color circles by ethnicity, using a match expression
              // https://docs.mapbox.com/mapbox-gl-js/style-spec/#expressions-match
              'circle-stroke-width': 1,
              "circle-color": [
          			'match',
          			['get', 'Category'],
          			'Co-operative Society (Company)','#a6cee3',
                'Co-operative Society (Corporate Body)','#1f78b4',
                'Community Benefit Society (Company)','#fdbf6f',
                'Community Benefit Society (Corporate Body)','#ff7f00',
                'Housing Association Co-operative Society (Company)','#e5f5f9',
                'Housing Association Co-operative Society (Corporate Body)','#ccece6',
                'Housing Association Community Benefit Society (Company)','#99d8c9',
                'Housing Association Community Benefit Society (Corporate Body)','#66c2a4',
                'Housing Association Registered Society (Company)','#41ae76',
                'Housing Association Registered Society (Corporate Body)','#238b45',
                'Housing Association/Society (Company)','#238b45',
                'Housing Association/Society (Corporate Body)','#00441b',
                'Industrial and Provident Society (Company)','#fb9a99',
                'Industrial and Provident Society (Corporate Body)','#e31a1c',
                'Local Authority','#cab2d6',
                'County Council','#6a3d9a',
                'Registered Society (Company)','#ffed6f',
                'Registered Society (Corporate Body)','#ffffb3',
                'Unlimited Company','#d7b5d8',
                'Corporate Body','#df65b0',
                'Limited Company or Public Limited Company','#dd1c77',
                'Limited Liability Partnership','#980043',
          			/* other */ '#e0e0e0'
          			]
            }
        });

});

// Click on Transit transitstops
map.on('click', 'landowners', function (e) {
var coordinates = e.features[0].geometry.coordinates.slice();
var Title = e.features[0].properties.Title;
var Tenure = e.features[0].properties.Tenure;
var Property_Address = e.features[0].properties.Property_Address;
var Company_No = e.features[0].properties.Company_No;
var Category = e.features[0].properties.Category;
var geocoded_address = e.features[0].properties.geocoded_address;
var geocode_type = e.features[0].properties.geocode_type;



var description = '<p><b>' + Title + '</b></p>' +
'<p> Tenure: ' + Tenure + '</p>' +
'<p> Property Address: ' + Property_Address + '</p>' +
'<p> Company No: ' + Company_No + '</p>' +
'<p> Category: ' + Category + '</p>' +
'<p> Geocoded address: ' + geocoded_address + '</p>' +
'<p> Geocode type: ' + geocode_type + '</p>';
 
new maplibregl.Popup()
.setLngLat(coordinates)
.setHTML(description)
.addTo(map);
});
 
// Change the cursor to a pointer when the mouse is over the places layer.
map.on('mouseenter', 'landowners', function () {
map.getCanvas().style.cursor = 'pointer';
});
 
// Change it back to a pointer when it leaves.
map.on('mouseleave', 'landowners', function () {
map.getCanvas().style.cursor = '';
});

</script>
<!-- map -->
</div>
<h1>Interactive map of the Land Registry Inspire Polygons</h1>



<h2>Copyright Notice</h2>
<p>This information is subject to Crown copyright and database rights 2022 and is reproduced with the <a href="https://use-land-property-data.service.gov.uk/datasets/inspire#conditions">permission of HM Land Registry</a>.</p>

<p>The polygons (including the associated geometry, namely x, y co-ordinates) are subject to Crown copyright and database rights 2022 Ordnance Survey 100026316.</p>
<div>
  
</div>

</body>
</html>




